let pokemonRepository=function(){let e=[],t=[],n=!1;const o={normal:"#A8A878",fighting:"#C03028",flying:"#A890F0",poison:"#A040A0",ground:"#E0C068",rock:"#B8A038",bug:"#A8B820",ghost:"#705898",steel:"#B8B8D0",fire:"#F08030",water:"#6890F0",grass:"#78C850",electric:"#F8D030",psychic:"#F85888",ice:"#98D8D8",dragon:"#7038F8",dark:"#705848",fairy:"#F0B6BC"},a=Object.keys(o),r=function(){const e=[151,100,135,107,156,72,88,89];return{getTotalAtGeneration:function(t){if(t>e.length)return-1;let n=0;for(let o=0;o<t;o++)n+=e[o];return n},getGenerationCount:function(t){return t>e.length||t<1?-1:e[t-1]}}}();function i(e){switch(e){case 1:return"linear-gradient(30deg, #FF0000 50%, #0000FF 50%)";case 2:return"linear-gradient(30deg, #FADB28 50%, #B9B9B9 50%)";case 3:return"linear-gradient(30deg, #4338CA 50%, #CA3838 50%)";case 4:return"linear-gradient(30deg, #29ACC9 50%, #C929C2 50%)";case 5:return"linear-gradient(30deg, #050505 50%, #FAFAFA 50%)";case 6:return"linear-gradient(30deg, #2EAAC2 50%, #5B2EC2 50%)";case 7:return"linear-gradient(30deg, #FF9B22 50%, #6522FF 50%)";case 8:return"linear-gradient(30deg, #CF6C6C 50%, #6C78CF 50%)";default:return"#7ae869"}}function l(){let t=[];if(n=!0,e.length+150<=899)for(let n=1;n<151;n++){let o=new Promise(function(t){u("https://pokeapi.co/api/v2/pokemon/"+(e.length+n)+"/").then(e=>(s(e),e)).then(e=>{h(e),t(e)})});t.push(o)}else{let n=899-e.length;for(let o=0;o<n;o++){let n=new Promise(function(t){u("https://pokeapi.co/api/v2/pokemon/"+(e.length+o)+"/").then(e=>(s(e),e)).then(e=>{h(e),t(e)})});t.push(n)}}Promise.all(t).then(function(t){e.sort((e,t)=>e.id-t.id),t.forEach(e=>{g(e)})}).then(()=>{d(),n=!1});let o=$(".formatted");o.get(0)&&o.get(0).remove()}function s(t){return"object"!=typeof t?(console.warn("You can only add objects to the respository."),!1):(e.push(t),!0)}function d(){let e=$(".pokedex-list");if(!e)return void console.error("Couldn't find the pokedex list.");let t=$(".menubox");if(t.get(0)){t.removeClass("menubox__visible");let n=$("#search-button");return void(n.get(0)||((n=$("<button>")).attr("id","search-button"),n.addClass("btn"),n.text("Search"),n.on("click",()=>{c()}),n.insertBefore(e)))}(t=$("<div>")).addClass("menubox");let n=$("<h3>");n.css("display","inline"),n.text("Type ");let o=$("<ul>");o.addClass("menu__list container");let r=$("<div>");r.addClass("row"),o.append(r);let i=[];for(let e=0;e<a.length;e++){let t=$("<input>");t.prop({type:"radio",id:"pokeType",name:"type",value:a[e]}),t.on("change",()=>{p(t)});let n=$("<label>");n.prop({for:"menu-item"}),n.text(""+a[e]),n.on("click",()=>{t.prop("checked",!0),p(t)}),n.css("text-transform","capitalize");let o=$("<li>");o.addClass("col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2"),o.append(t),o.append(n),i.push(o)}i.forEach(e=>{r.append(e)}),t.append(n),t.append(o),t.insertBefore(e)}function p(n){!function t(){let n=$(".pokedex-box");let o=$(".pokedex-list");o.get(0)&&o.remove();n.find("br").remove();let a=$(".formatted");a.get(0)&&a.remove();let r=$("<button>");r.addClass("formatted btn");r.text("Reset");r.on("click",()=>{t(),function(){let t=$(".pokedex-box"),n=$("#search-button");n.get(0)||((n=$("<button>")).attr("id","search-button"),n.addClass("btn"),n.text("Search"),n.on("click",()=>{c()}),t.append(n)),e.forEach(e=>{g(e)}),d();let o=$(".formatted");o.get(0)&&o.get(0).remove(),t.find("br").last().remove()}()});n.append("<br>");n.append(r)}(),function(n){e.forEach(e=>{e.types.forEach(o=>{o.type.name===n.prop("value")&&(t.push(e),g(e))})})}(n)}function c(){let e=$(".menubox");if(e.get(0)){e.addClass("menubox__visible"),$("#search-button").remove()}}function g(e){let t,n=$(".pokedex-box"),a=$(".pokedex-list");a.get(0)||((a=$("<ul>")).addClass("pokedex-list container"),(t=$("<div>")).addClass("row"),a.append(t),n.append(a)),t=$(".row").last();let r=$("<li>");r.addClass("col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2");let l=$("<button>");l.addClass("list-btn btn"),l.on("click",()=>{!function(e){let t=$(".modal-title"),n=$(".modal-body");t.empty(),n.empty();let a=$("<div>");a.addClass("pokebox pokebox__left");let r=$("<h1>");r.text(e.name),r.css("text-transform","capitalize");let l=[];e.types.forEach(e=>{let t=$("<span>");t.css("background-color",o[e.type.name]),t.addClass("type-style"),t.text(e.type.name),t.css("text-transform","capitalize"),l.push(t)});let s=$("<img>").prop({src:e.imageUrl});s.addClass("pokeimg modal-img"),s.on("dblclick",()=>{s.css("animation-name","rotate3D"),s.css("animation-duration","1s"),s.css("animation-iteration-count","1")});let d=$('<span class="generation-badge">');d.text("Generation "+e.generation),d.css("background",i(e.generation));let p=$("<div>");p.addClass("pokebox pokebox__right");let c=$("<h1>");c.text("Info");let g=$("<p>");g.html("Height: "+(e.height/10).toFixed(1)+"m<br>Weight: "+(e.weight/10).toFixed(1)+"kg<br>BMI: "+function(e){let t=10*e.height;return(e.weight/10/t/t*1e4).toFixed(1)}(e)+"<br><br>Description: "+e.description),a.append(r),a.append(s),a.append("<br>"),l.forEach(e=>{a.append(e)}),a.append("<br>"),a.append(d),p.append(c),p.append(g),n.append(a),n.append(p),$("#pokemon-container").modal()}(e)});let s=$('<span class="generation-badge">');s.css("float","right"),s.css("background",i(e.generation)),s.text("Gen "+e.generation),l.append(s);let d=$("<img>").prop({src:e.imageUrl});d.addClass("list-btn__icon"),e.types.length<2?d.css("background-color",o[e.types[0].type.name]):d.css("background","linear-gradient(30deg, "+o[e.types[0].type.name]+" 50%, "+o[e.types[1].type.name]+" 50%)"),l.append(d),l.html(l.html()+"<br>"+e.name),l.css("text-transform","capitalize"),r.append(l),t.append(r)}function u(e){return m(null),$.ajax(e,{dataType:"json"}).then(function(e){f();let t={name:e.name,id:e.id,imageUrl:e.sprites.front_default,speciesUrl:e.species.url,height:e.height,weight:e.weight,types:e.types};return t.id<=r.getTotalAtGeneration(1)?t.generation=1:t.id<=r.getTotalAtGeneration(2)?t.generation=2:t.id<=r.getTotalAtGeneration(3)?t.generation=3:t.id<=r.getTotalAtGeneration(4)?t.generation=4:t.id<=r.getTotalAtGeneration(5)?t.generation=5:t.id<=r.getTotalAtGeneration(6)?t.generation=6:t.id<=r.getTotalAtGeneration(7)?t.generation=7:t.id<=r.getTotalAtGeneration(8)?t.generation=8:t.generation=0,t}).catch(function(e){f(),console.error(e)})}function h(e){m(e);let t=e.speciesUrl;return $.ajax(t,{dataType:"json"}).then(function(t){f();for(let n=0;n<t.flavor_text_entries.length;n++){let o=t.flavor_text_entries[n];if("en"===o.language.name){e.description=o.flavor_text;break}}}).catch(function(e){f(),console.log(e)})}function m(e,t){let n=$(".pokedex-text"),o=$("<h2>");t&&null!==t?o.text(t+" "+e.name+"..."):null===e?o.text("Loading pokemon api..."):o.text("Loading "+e.name+"...");let a=$(".spinner-border");0===a.length&&(a=$('<div class="spinner-border text-yellow" role="status"><span class="sr-only">Loading...</span>'),$(".pokedex__footer").empty(),$(".pokedex__footer").append(a)),n.empty(),n.append(o)}function f(){let e=$(".pokedex-text"),t=$("<h2>");t.text("Pokedex"),e.empty(),e.append(t),$(".pokedex__footer").empty()}return $(window).scroll(function(){$(window).scrollTop()+$(window).height()!=$(document).height()||n||e.length<r.getTotalAtGeneration(8)&&l()}),{add:s,addListItem:g,getAll:function(){return e},loadList:u,createDocument:function(){let e=$(".pokedex-box"),t=$("#search-button");t.get(0)||((t=$("<button>")).attr("id","search-button"),t.addClass("btn"),t.text("Search"),t.on("click",()=>{c()}),e.append(t)),l()},pokemonGeneration:r}}();pokemonRepository.createDocument();
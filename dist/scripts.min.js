let pokemonRepository=function(){let e=[],t=["normal","fighting","flying","poison","ground","rock","bug","ghost","steel","fire","water","grass","electric","psychic","ice","dragon","dark","fairy"],n={normal:"#A8A878",fighting:"#C03028",flying:"#A890F0",poison:"#A040A0",ground:"#E0C068",rock:"#B8A038",bug:"#A8B820",ghost:"#705898",steel:"#B8B8D0",fire:"#F08030",water:"#6890F0",grass:"#78C850",electric:"#F8D030",psychic:"#F85888",ice:"#98D8D8",dragon:"#7038F8",dark:"#705848",fairy:"#F0B6BC"};function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}function a(e){switch(e){case 1:return"linear-gradient(30deg, #FF0000 50%, #0000FF 50%)";case 2:return"linear-gradient(30deg, #FADB28 50%, #B9B9B9 50%)";case 3:return"linear-gradient(30deg, #4338CA 50%, #CA3838 50%)";case 4:return"linear-gradient(30deg, #29ACC9 50%, #C929C2 50%)";case 5:return"linear-gradient(30deg, #050505 50%, #FAFAFA 50%)";case 6:return"linear-gradient(30deg, #2EAAC2 50%, #5B2EC2 50%)";case 7:return"linear-gradient(30deg, #FF9B22 50%, #6522FF 50%)";case 8:return"linear-gradient(30deg, #CF6C6C 50%, #6C78CF 50%)";default:return"#7ae869"}}function r(){let t=$(".pokedex-box"),n=[];if(e.length+150<=899)for(let t=1;t<151;t++){let o=new Promise(function(n){c("https://pokeapi.co/api/v2/pokemon/"+(e.length+t)+"/").then(e=>(i(e),e)).then(e=>{g(e),n(e)})});n.push(o)}else{let t=899-e.length;for(let o=0;o<t;o++){let t=new Promise(function(t){c("https://pokeapi.co/api/v2/pokemon/"+(e.length+o)+"/").then(e=>(i(e),e)).then(e=>{g(e),t(e)})});n.push(t)}}Promise.all(n).then(function(t){e.sort((e,t)=>e.id-t.id),t.forEach(e=>{p(e)})}).then(()=>{if(l(),e.length<899){let e=$("<button>");e.addClass("formatted formatted__secondary btn"),e.text("Next"),e.on("click",()=>{r()}),t.append(e)}});let o=$(".formatted");o.get(0)&&o.get(0).remove()}function i(t){return"object"!=typeof t?(console.warn("You can only add objects to the respository."),!1):(e.push(t),!0)}function l(){let e=$(".pokedex-list");if(!e)return void console.error("Couldn't find the pokedex list.");let n=$(".menubox");if(n.get(0)){n.removeClass("menubox__visible");let t=$("#search-button");return void(t.get(0)||((t=$("<button>")).attr("id","search-button"),t.addClass("btn"),t.text("Search"),t.on("click",()=>{s()}),t.insertBefore(e)))}(n=$("<div>")).addClass("menubox");let a=$("<h3>");a.css("display","inline"),a.text("Type ");let r=$("<ul>");r.addClass("menu__list container");let i=$("<div>");i.addClass("row"),r.append(i);let l=[];for(let e=0;e<t.length;e++){let n=$("<input>");n.prop({type:"radio",id:"pokeType",name:"type",value:t[e]}),n.on("change",()=>{d(n)});let a=$("<label>");a.prop({for:"menu-item"}),a.text(""+o(t[e])),a.on("click",()=>{n.prop("checked",!0),d(n)});let r=$("<li>");r.addClass("col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2"),r.append(n),r.append(a),l.push(r)}l.forEach(e=>{i.append(e)}),n.append(a),n.append(r),n.insertBefore(e)}function d(t){!function t(){let n=$(".pokedex-box");let o=$(".pokedex-list");o.get(0)&&o.remove();n.find("br").remove();let a=$(".formatted");a.get(0)&&a.remove();let i=$("<button>");i.addClass("formatted btn");i.text("Reset");i.on("click",()=>{t(),function(){let t=$(".pokedex-box"),n=$("#search-button");if(n.get(0)||((n=$("<button>")).attr("id","search-button"),n.addClass("btn"),n.text("Search"),n.on("click",()=>{s()}),t.append(n)),e.forEach(e=>{p(e)}),l(),e.length<899){let e=$("<button>");e.addClass("formatted formatted__secondary btn"),e.text("Next"),e.on("click",()=>{r()}),t.append(e)}let o=$(".formatted");o.get(0)&&o.get(0).remove(),t.find("br").last().remove()}()});n.append("<br>");n.append(i)}(),function(t){e.forEach(e=>{e.types.forEach(n=>{n.type.name===t.prop("value")&&p(e)})})}(t)}function s(){let e=$(".menubox");if(e.get(0)){e.addClass("menubox__visible"),$("#search-button").remove()}}function p(e){let t,r=$(".pokedex-box"),i=$(".pokedex-list");i.get(0)||((i=$("<ul>")).addClass("pokedex-list container"),(t=$("<div>")).addClass("row"),i.append(t),r.append(i)),t=$(".row").last();let l=$("<li>");l.addClass("col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2");let d=$("<button>");d.addClass("list-btn btn"),d.on("click",()=>{!function(e){let t=$(".modal-title"),r=$(".modal-body");t.empty(),r.empty();let i=$("<div>");i.addClass("pokebox pokebox__left");let l=$("<h1>");l.text(o(e.name));let d=[];e.types.forEach(e=>{let t=$("<span>");t.css("background-color",n[e.type.name]),t.addClass("type-style"),t.text(o(e.type.name)),d.push(t)});let s=$("<img>").prop({src:e.imageUrl});s.addClass("pokeimg modal-img"),s.on("dblclick",()=>{s.css("animation-name","rotate3D"),s.css("animation-duration","1s"),s.css("animation-iteration-count","1")});let p=$('<span class="badge">');p.text("Generation "+e.generation),p.css("background",a(e.generation));let c=$("<div>");c.addClass("pokebox pokebox__right");let g=$("<h1>");g.text("Info");let u=$("<p>");u.html("Height: "+(e.height/10).toFixed(1)+"m<br>Weight: "+(e.weight/10).toFixed(1)+"kg<br>BMI: "+function(e){let t=10*e.height;return(e.weight/10/t/t*1e4).toFixed(1)}(e)+"<br><br>Description: "+e.description),i.append(l),i.append(s),i.append("<br>"),d.forEach(e=>{i.append(e)}),i.append("<br>"),i.append(p),c.append(g),c.append(u),r.append(i),r.append(c),$("#pokemon-container").modal()}(e)});let s=$('<span class="badge">');s.css("float","right"),s.css("background",a(e.generation)),s.text("Gen "+e.generation),d.append(s);let p=$("<img>").prop({src:e.imageUrl});p.addClass("list-btn__icon"),e.types.length<2?p.css("background-color",n[e.types[0].type.name]):p.css("background","linear-gradient(30deg, "+n[e.types[0].type.name]+" 50%, "+n[e.types[1].type.name]+" 50%)"),d.append(p),d.html(d.html()+"<br>"+o(e.name)),l.append(d),t.append(l)}function c(e){return u(null),$.ajax(e,{dataType:"json"}).then(function(e){m();let t={name:e.name,id:e.id,imageUrl:e.sprites.front_default,speciesUrl:e.species.url,height:e.height,weight:e.weight,types:e.types};return t.id<=151?t.generation=1:t.id<=251?t.generation=2:t.id<=386?t.generation=3:t.id<=493?t.generation=4:t.id<=649?t.generation=5:t.id<=721?t.generation=6:t.id<=809?t.generation=7:t.id<=898?t.generation=8:t.generation=0,t}).catch(function(e){m(),console.error(e)})}function g(e){u(e);let t=e.speciesUrl;return $.ajax(t,{dataType:"json"}).then(function(t){m();for(let n=0;n<t.flavor_text_entries.length;n++){let o=t.flavor_text_entries[n];if("en"===o.language.name){e.description=o.flavor_text;break}}}).catch(function(e){m(),console.log(e)})}function u(e,t){let n=$(".pokedex-text"),o=$("<h2>");t&&null!==t?o.text(t+" "+e.name+"..."):null===e?o.text("Loading pokemon api..."):o.text("Loading "+e.name+"...");let a=$('<div class="spinner-border text-yellow" role="status"><span class="sr-only">Loading...</span>');n.empty(),n.append(o),n.append(a)}function m(){let e=$(".pokedex-text"),t=$("<h2>");t.text("Pokedex"),e.empty(),e.append(t)}return{add:i,addListItem:p,getAll:function(){return e},loadList:c,targetUrl:"https://pokeapi.co/api/v2/pokemon/?limit=150",createDocument:function(){let e=$(".pokedex-box"),t=$("#search-button");t.get(0)||((t=$("<button>")).attr("id","search-button"),t.addClass("btn"),t.text("Search"),t.on("click",()=>{s()}),e.append(t)),r()}}}();pokemonRepository.createDocument();

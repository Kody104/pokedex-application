let pokemonRepository=function(){let e=[],t=["normal","fighting","flying","poison","ground","rock","bug","ghost","steel","fire","water","grass","electric","psychic","ice","dragon","dark","fairy"],n={normal:"#A8A878",fighting:"#C03028",flying:"#A890F0",poison:"#A040A0",ground:"#E0C068",rock:"#B8A038",bug:"#A8B820",ghost:"#705898",steel:"#B8B8D0",fire:"#F08030",water:"#6890F0",grass:"#78C850",electric:"#F8D030",psychic:"#F85888",ice:"#98D8D8",dragon:"#7038F8",dark:"#705848",fairy:"#F0B6BC"};function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}function a(){let t=$(".pokedex-box"),n=[];if(e.length+150<=899)for(let t=1;t<151;t++){let o=new Promise(function(n){s("https://pokeapi.co/api/v2/pokemon/"+(e.length+t)+"/").then(e=>(l(e),e)).then(e=>{c(e),n(e)})});n.push(o)}else{let t=899-e.length;for(let o=0;o<t;o++){let t=new Promise(function(t){s("https://pokeapi.co/api/v2/pokemon/"+(e.length+o)+"/").then(e=>(l(e),e)).then(e=>{c(e),t(e)})});n.push(t)}}Promise.all(n).then(function(t){e.sort((e,t)=>e.id-t.id),t.forEach(e=>{p(e)})}).then(()=>{if(i(),e.length<899){let e=$("<button>");e.addClass("formatted formatted__secondary btn"),e.text("Next"),e.on("click",()=>{a()}),t.append(e)}});let o=$(".formatted");o.get(0)&&o.get(0).remove()}function l(t){return"object"!=typeof t?(console.warn("You can only add objects to the respository."),!1):(e.push(t),!0)}function i(){let e=$(".pokedex-list");if(!e)return void console.error("Couldn't find the pokedex list.");let n=$(".menubox");if(n.get(0)){n.removeClass("menubox__visible");let t=$("#search-button");return void(t.get(0)||((t=$("<button>")).attr("id","search-button"),t.addClass("btn"),t.text("Search"),t.on("click",()=>{d()}),t.insertBefore(e)))}(n=$("<div>")).addClass("menubox");let a=$("<h3>");a.css("display","inline"),a.text("Type ");let l=$("<ul>");l.addClass("menu__list container");let i=$("<div>");i.addClass("row"),l.append(i);let p=[];for(let e=0;e<t.length;e++){let n=$("<input>");n.prop({type:"radio",id:"pokeType",name:"type",value:t[e]}),n.on("change",()=>{r(n)});let a=$("<label>");a.prop({for:"menu-item"}),a.text(""+o(t[e])),a.on("click",()=>{n.prop("checked",!0),r(n)});let l=$("<li>");l.addClass("col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2"),l.append(n),l.append(a),p.push(l)}p.forEach(e=>{i.append(e)}),n.append(a),n.append(l),n.insertBefore(e)}function r(t){!function t(){let n=$(".pokedex-box");let o=$(".pokedex-list");o.get(0)&&o.remove();n.find("br").remove();let l=$(".formatted");l.get(0)&&l.remove();let r=$("<button>");r.addClass("formatted btn");r.text("Reset");r.on("click",()=>{t(),function(){let t=$(".pokedex-box"),n=$("#search-button");if(n.get(0)||((n=$("<button>")).attr("id","search-button"),n.addClass("btn"),n.text("Search"),n.on("click",()=>{d()}),t.append(n)),e.forEach(e=>{p(e)}),i(),e.length<899){let e=$("<button>");e.addClass("formatted formatted__secondary btn"),e.text("Next"),e.on("click",()=>{a()}),t.append(e)}let o=$(".formatted");o.get(0)&&o.get(0).remove(),t.find("br").last().remove()}()});n.append("<br>");n.append(r)}(),function(t){e.forEach(e=>{e.types.forEach(n=>{n.type.name===t.prop("value")&&p(e)})})}(t)}function d(){let e=$(".menubox");if(e.get(0)){e.addClass("menubox__visible"),$("#search-button").remove()}}function p(e){let t,a=$(".pokedex-box"),l=$(".pokedex-list");l.get(0)||((l=$("<ul>")).addClass("pokedex-list container"),(t=$("<div>")).addClass("row"),l.append(t),a.append(l)),t=$(".row").last();let i=$("<li>");i.addClass("col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2");let r=$("<button>");r.addClass("list-btn btn"),r.on("click",()=>{!function(e){let t=$(".modal-title"),a=$(".modal-body");t.empty(),a.empty();let l=$("<div>");l.addClass("pokebox pokebox__left");let i=$("<h1>");i.text(o(e.name));let r=[];e.types.forEach(e=>{let t=$("<span>");t.css("background-color",n[e.type.name]),t.addClass("type-style"),t.text(o(e.type.name)),r.push(t)});let d=$("<img>").prop({src:e.imageUrl});d.addClass("pokeimg modal-img"),d.on("dblclick",()=>{d.css("animation-name","rotate3D"),d.css("animation-duration","1s"),d.css("animation-iteration-count","1")});let p=$("<div>");p.addClass("pokebox pokebox__right");let s=$("<h1>");s.text("Info");let c=$("<p>");c.html("Height: "+(e.height/10).toFixed(1)+"m<br>Weight: "+(e.weight/10).toFixed(1)+"kg<br>Created: Generation "+e.generation+"<br><br>Description: "+e.description),l.append(i),l.append(d),l.append("<br>"),r.forEach(e=>{l.append(e)}),p.append(s),p.append(c),a.append(l),a.append(p),$("#pokemon-container").modal()}(e)});let d=$("<img>").prop({src:e.imageUrl});d.addClass("list-btn__icon"),e.types.length<2?d.css("background-color",n[e.types[0].type.name]):d.css("background","linear-gradient(30deg, "+n[e.types[0].type.name]+" 50%, "+n[e.types[1].type.name]+" 50%)"),r.append(d),r.html(r.html()+"<br>"+o(e.name)),i.append(r),t.append(i)}function s(e){return u(null),$.ajax(e,{dataType:"json"}).then(function(e){m();let t={name:e.name,id:e.id,imageUrl:e.sprites.front_default,speciesUrl:e.species.url,height:e.height,weight:e.weight,types:e.types};return t.id<=151?t.generation=1:t.id<=251?t.generation=2:t.id<=386?t.generation=3:t.id<=493?t.generation=4:t.id<=649?t.generation=5:t.id<=721?t.generation=6:t.id<=809?t.generation=7:t.generation=8,t}).catch(function(e){m(),console.error(e)})}function c(e){u(e);let t=e.speciesUrl;return $.ajax(t,{dataType:"json"}).then(function(t){m();for(let n=0;n<t.flavor_text_entries.length;n++){let o=t.flavor_text_entries[n];if("en"===o.language.name){e.description=o.flavor_text;break}}}).catch(function(e){m(),console.log(e)})}function u(e,t){let n=$(".pokedex-text"),o=$("<h2>");t&&null!==t?o.text(t+" "+e.name+"..."):null===e?o.text("Loading pokemon api..."):o.text("Loading "+e.name+"...");let a=$('<div class="spinner-border text-yellow" role="status"><span class="sr-only">Loading...</span>');n.empty(),n.append(o),n.append(a)}function m(){let e=$(".pokedex-text"),t=$("<h2>");t.text("Pokedex"),e.empty(),e.append(t)}return{add:l,addListItem:p,getAll:function(){return e},loadList:s,targetUrl:"https://pokeapi.co/api/v2/pokemon/?limit=150",createDocument:function(){let e=$(".pokedex-box"),t=$("#search-button");t.get(0)||((t=$("<button>")).attr("id","search-button"),t.addClass("btn"),t.text("Search"),t.on("click",()=>{d()}),e.append(t)),a()}}}();pokemonRepository.createDocument();
